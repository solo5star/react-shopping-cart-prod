{"version":3,"file":"AwaitRecoilState-14029da1.js","sources":["../../src/recoil/queries/profileQuery.ts","../../src/components/utils/AwaitRecoilState.tsx"],"sourcesContent":["import { selectorFamily } from 'recoil';\nimport type { Client } from '../../api';\n\ntype ProfileQueryParams = {\n  client: Client;\n};\n\nconst profileQuery = selectorFamily({\n  key: 'profileQuery',\n  get:\n    ({ client }: ProfileQueryParams) =>\n    () =>\n      client.get('/profile'),\n});\n\nexport default profileQuery;\n","import type { PropsWithChildren } from 'react';\nimport { Suspense, useMemo } from 'react';\nimport type { RecoilValueReadOnly } from 'recoil';\nimport { useRecoilValue } from 'recoil';\n\ntype AwaitRecoilStateLoaderProps<T> = {\n  state: RecoilValueReadOnly<T>;\n  children?: (\n    data: T,\n  ) => PropsWithChildren extends { children?: infer Children } ? Children : never;\n};\n\nconst AwaitRecoilStateLoader = <T,>(props: AwaitRecoilStateLoaderProps<T>) => {\n  const { state, children } = props;\n  const unwrapedState = useRecoilValue(state);\n\n  return children?.(unwrapedState) as React.ReactElement;\n};\n\ntype AwaitRecoilStateProps<T> = {\n  state?: RecoilValueReadOnly<T>;\n  loadingElement?: React.ReactNode;\n  children?: (\n    data: T,\n  ) => PropsWithChildren extends { children?: infer Children } ? Children : never;\n};\n\nconst AwaitRecoilState = <T,>(props: AwaitRecoilStateProps<T>) => {\n  const { loadingElement, state, children } = props;\n\n  // state가 변경되었을 때 새로 렌더링하기 위함\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const key = useMemo(() => Date.now(), [state]);\n\n  return (\n    <Suspense key={key} fallback={loadingElement}>\n      {state && <AwaitRecoilStateLoader state={state}>{children}</AwaitRecoilStateLoader>}\n    </Suspense>\n  );\n};\n\nexport default AwaitRecoilState;\n"],"names":["profileQuery","selectorFamily","client","AwaitRecoilStateLoader","props","state","children","unwrapedState","useRecoilValue","AwaitRecoilState","loadingElement","key","useMemo","jsx","Suspense"],"mappings":"2IAOA,MAAMA,EAAeC,EAAe,CAClC,IAAK,eACL,IACE,CAAC,CAAE,OAAAC,CAAA,IACH,IACEA,EAAO,IAAI,UAAU,CAC3B,CAAC,ECDDC,EAAAC,GAAA,CACE,KAAA,CAAA,MAAAC,EAAA,SAAAC,CAAA,EAAAF,EACAG,EAAAC,EAAAH,CAAA,EAEA,OAAAC,GAAA,YAAAA,EAAAC,EACF,EAUAE,EAAAL,GAAA,CACE,KAAA,CAAA,eAAAM,EAAA,MAAAL,EAAA,SAAAC,CAAA,EAAAF,EAIAO,EAAAC,EAAAA,QAAA,IAAA,KAAA,MAAA,CAAAP,CAAA,CAAA,EAEA,OAAAQ,EAAAA,IAAAC,EAAAA,SAAA,CAAA,SAAAJ,EAAA,SAAAL,GAAAQ,EAAA,IAAAV,EAAA,CAAA,MAAAE,EAAA,SAAAC,CAAA,CAAA,CAAA,EAAAK,CAAA,CAKF"}