{"version":3,"file":"userProfileState-26f81e3d.js","sources":["../../src/recoil/queries/profileQuery.ts","../../src/recoil/user/userAuthorizationState.ts","../../src/recoil/user/userProfileState.ts"],"sourcesContent":["import { selectorFamily } from 'recoil';\nimport type { Client } from '../../api';\n\ntype ProfileQueryParams = {\n  client: Client;\n};\n\nconst profileQuery = selectorFamily({\n  key: 'profileQuery',\n  get:\n    ({ client }: ProfileQueryParams) =>\n    () =>\n      client.get('/profile'),\n});\n\nexport default profileQuery;\n","import { selector } from 'recoil';\nimport type { Authorization } from '../../types/Authorization';\nimport authorizationState from '../atoms/authorizationState';\nimport serverState from '../atoms/serverState';\n\nconst userAuthorizationState = selector<Authorization | null>({\n  key: 'userAuthorizationState',\n  get: ({ get }) => {\n    const server = get(serverState);\n    return get(authorizationState(server));\n  },\n  set: ({ get, set }, authorization) => {\n    const server = get(serverState);\n    set(authorizationState(server), authorization);\n  },\n});\n\nexport default userAuthorizationState;\n","import { selector } from 'recoil';\nimport type { Profile } from '../../types/Profile';\nimport clientState from '../atoms/clientState';\nimport profileQuery from '../queries/profileQuery';\nimport userAuthorizationState from './userAuthorizationState';\n\nconst userProfileState = selector<Profile>({\n  key: 'userProfileState',\n  get: ({ get }) => {\n    const client = get(clientState);\n    const authorization = get(userAuthorizationState);\n\n    const response = get(profileQuery({ client }));\n    const profile = response.acceptOrThrow(200).data;\n    return { ...profile, username: authorization?.username ?? 'Anonymous' };\n  },\n});\n\nexport default userProfileState;\n"],"names":["profileQuery","selectorFamily","client","userAuthorizationState","selector","get","server","serverState","authorizationState","set","authorization","userProfileState","clientState"],"mappings":"0GAOA,MAAMA,EAAeC,EAAe,CAClC,IAAK,eACL,IACE,CAAC,CAAE,OAAAC,CAAA,IACH,IACEA,EAAO,IAAI,UAAU,CAC3B,CAAC,ECRKC,EAAyBC,EAA+B,CAC5D,IAAK,yBACL,IAAK,CAAC,CAAE,IAAAC,KAAU,CACV,MAAAC,EAASD,EAAIE,CAAW,EACvB,OAAAF,EAAIG,EAAmBF,CAAM,CAAC,CACvC,EACA,IAAK,CAAC,CAAE,IAAAD,EAAK,IAAAI,CAAA,EAAOC,IAAkB,CAC9B,MAAAJ,EAASD,EAAIE,CAAW,EAC1BE,EAAAD,EAAmBF,CAAM,EAAGI,CAAa,CAC/C,CACF,CAAC,ECTKC,EAAmBP,EAAkB,CACzC,IAAK,mBACL,IAAK,CAAC,CAAE,IAAAC,KAAU,CACV,MAAAH,EAASG,EAAIO,CAAW,EACxBF,EAAgBL,EAAIF,CAAsB,EAIhD,MAAO,CAAE,GAFQE,EAAIL,EAAa,CAAE,OAAAE,CAAA,CAAQ,CAAC,EACpB,cAAc,GAAG,EAAE,KACvB,UAAUQ,GAAA,YAAAA,EAAe,WAAY,YAC5D,CACF,CAAC"}