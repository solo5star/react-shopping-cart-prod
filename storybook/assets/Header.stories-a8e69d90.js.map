{"version":3,"file":"Header.stories-a8e69d90.js","sources":["../../src/assets/icons/home-icon.svg","../../src/components/utils/ErrorBoundary.tsx","../../src/components/utils/AwaitRecoilState.tsx","../../src/components/Header.tsx"],"sourcesContent":["export default \"__VITE_ASSET__2ceed860__\"","import type { PropsWithChildren } from 'react';\nimport React from 'react';\n\ntype ErrorBoundaryState = {\n  hasError: boolean;\n};\n\ntype ErrorBoundaryProps = PropsWithChildren<{\n  fallback?: React.ReactNode;\n}>;\n\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  override render() {\n    const { fallback, children } = this.props;\n    const { hasError } = this.state;\n\n    if (hasError) {\n      return fallback;\n    }\n\n    return children;\n  }\n}\n\nexport default ErrorBoundary;\n","import { Suspense } from 'react';\nimport type { RecoilValueReadOnly } from 'recoil';\nimport { useRecoilValue } from 'recoil';\nimport ErrorBoundary from './ErrorBoundary';\n\ntype AwaitRecoilStateLoaderProps<T> = {\n  state: RecoilValueReadOnly<T>;\n  children: (data: T) => React.ReactElement;\n};\n\nconst AwaitRecoilStateLoader = <T,>(props: AwaitRecoilStateLoaderProps<T>) => {\n  const { state, children } = props;\n  const unwrapedState = useRecoilValue(state);\n\n  return children(unwrapedState);\n};\n\ntype AwaitRecoilStateProps<T> = {\n  loadingElement?: React.ReactNode;\n  errorElement?: React.ReactNode;\n  state: RecoilValueReadOnly<T>;\n  children: (data: T) => React.ReactElement;\n};\n\nconst AwaitRecoilState = <T,>(props: AwaitRecoilStateProps<T>) => {\n  const { errorElement, loadingElement, state, children } = props;\n\n  return (\n    <ErrorBoundary fallback={errorElement}>\n      <Suspense fallback={loadingElement}>\n        <AwaitRecoilStateLoader state={state}>{children}</AwaitRecoilStateLoader>\n      </Suspense>\n    </ErrorBoundary>\n  );\n};\n\nexport default AwaitRecoilState;\n","import { useRecoilState } from 'recoil';\nimport { styled } from 'styled-components';\nimport HomeIcon from '../assets/icons/home-icon.svg';\nimport cartItemsState from '../recoil/atoms/cartItemsState';\nimport serverState from '../recoil/atoms/serverState';\nimport servers from '../servers';\nimport Badge from './common/Badge';\nimport AwaitRecoilState from './utils/AwaitRecoilState';\n\nconst HeaderContainer = styled.header`\n  width: 100%;\n  height: 80px;\n\n  background: #333;\n  color: white;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n\n  margin: 0 auto;\n  padding: 0 24px;\n\n  height: 100%;\n  max-width: 1300px;\n`;\n\nconst HomeButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n\n  color: inherit;\n`;\n\nconst HomeButtonText = styled.h1`\n  font-size: 40px;\n  font-weight: 900;\n`;\n\nconst Menu = styled.nav`\n  display: flex;\n  gap: 24px;\n\n  padding: 4px 24px;\n`;\n\nconst MenuButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  font-size: 24px;\n  font-weight: 500;\n`;\n\nconst Selector = styled.select`\n  background-color: transparent;\n`;\n\nconst Option = styled.option`\n  background-color: #333;\n`;\n\ntype HeaderProps = {\n  onNavigate: (to: string) => void;\n};\n\nconst Header = (props: HeaderProps) => {\n  const { onNavigate } = props;\n  const [server, setServer] = useRecoilState(serverState);\n\n  const handleServerChange: React.ChangeEventHandler<HTMLSelectElement> = (event) => {\n    const serverName = event.target.value;\n    const server = servers.find((server) => server.name === serverName)!;\n\n    setServer(server);\n  };\n\n  return (\n    <HeaderContainer>\n      <HeaderContent>\n        <HomeButton onClick={() => onNavigate('/')}>\n          <img alt=\"홈\" src={HomeIcon} width={44} />\n          <HomeButtonText>SHOP</HomeButtonText>\n        </HomeButton>\n\n        <Menu>\n          <Selector onChange={handleServerChange} value={server.name}>\n            {servers.map((server) => (\n              <Option key={server.name} value={server.name}>\n                {server.name}\n              </Option>\n            ))}\n          </Selector>\n\n          <MenuButton onClick={() => onNavigate('/cart')}>\n            장바구니{' '}\n            <AwaitRecoilState state={cartItemsState}>\n              {(cartItems) => <Badge show={cartItems.length > 0}>{cartItems.length}</Badge>}\n            </AwaitRecoilState>\n          </MenuButton>\n        </Menu>\n      </HeaderContent>\n    </HeaderContainer>\n  );\n};\n\nexport default Header;\n"],"names":["HomeIcon","ErrorBoundary","React","props","fallback","children","hasError","AwaitRecoilStateLoader","state","unwrapedState","useRecoilValue","AwaitRecoilState","errorElement","loadingElement","jsx","Suspense","HeaderContainer","styled","HeaderContent","HomeButton","HomeButtonText","Menu","MenuButton","Selector","Option","Header","onNavigate","server","setServer","useRecoilState","serverState","handleServerChange","event","serverName","server2","servers","server3","jsxs","cartItemsState","cartItems","Badge"],"mappings":"8UAAA,MAAeA,EAAA,GAAA,IAAA,IAAA,yBAAA,YAAA,GAAA,EAAA,KCWf,MAAAC,UAAAC,EAAA,SAAA,CAAoF,YAAAC,EAAA,CAEhF,MAAAA,CAAA,EACA,KAAA,MAAA,CAAA,SAAA,EAAA,CAA+B,CACjC,OAAA,0BAAA,CAGE,MAAA,CAAA,SAAA,GAAwB,CAC1B,QAAA,CAGE,KAAA,CAAA,SAAAC,EAAA,SAAAC,GAAA,KAAA,MACA,CAAA,SAAAC,CAAA,EAAA,KAAA,MAEA,OAAAA,EACEF,EAGFC,CAAO,CAEX,8MCrBA,MAAAE,EAAAJ,GAAA,CACE,KAAA,CAAA,MAAAK,EAAA,SAAAH,CAAA,EAAAF,EACAM,EAAAC,EAAAF,CAAA,EAEA,OAAAH,EAAAI,CAAA,CACF,EASAE,EAAAR,GAAA,CACE,KAAA,CAAA,aAAAS,EAAA,eAAAC,EAAA,MAAAL,EAAA,SAAAH,CAAA,EAAAF,EAEA,OAAAW,EAAA,IAAAb,EAAA,CAAA,SAAAW,EAAA,SAAAE,EAAAA,IAAAC,EAAAA,SAAA,CAAA,SAAAF,EAAA,SAAAC,EAAA,IAAAP,EAAA,CAAA,MAAAC,EAAA,SAAAH,CAAA,CAAA,EAAA,CAAA,CAAA,CAOF,gbCzBA,MAAAW,EAAAC,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQAC,EAAAD,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYAE,EAAAF,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQAG,EAAAH,EAAA;AAAA;AAAA;AAAA,EAKAI,EAAAJ,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOAK,EAAAL,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASAM,EAAAN,EAAA;AAAA;AAAA,EAIAO,EAAAP,EAAA;AAAA;AAAA,EAQAQ,EAAAtB,GAAA,CACE,KAAA,CAAA,WAAAuB,CAAA,EAAAvB,EACA,CAAAwB,EAAAC,CAAA,EAAAC,EAAAC,CAAA,EAEAC,EAAAC,GAAA,CACE,MAAAC,EAAAD,EAAA,OAAA,MACAE,EAAAC,EAAA,KAAAC,GAAAA,EAAA,OAAAH,CAAA,EAEAL,EAAAM,CAAA,CAAgB,EAGlB,OAAApB,EAAAA,IAAAE,EAAA,CAAA,SAAAqB,EAAAA,KAAAnB,EAAA,CAAA,SAAA,CAGMmB,EAAA,KAAAlB,EAAA,CAAA,QAAA,IAAAO,EAAA,GAAA,EAAA,SAAA,CACEZ,MAAA,MAAA,CAAA,IAAA,IAAA,IAAAd,EAAA,MAAA,GAAA,EAAuCc,EAAAA,IAAAM,EAAA,CAAA,SAAA,MAAA,CAAA,CACnB,EAAA,EACtBiB,OAAAhB,EAAA,CAAA,SAAA,CAGEP,EAAAA,IAAAS,EAAA,CAAA,SAAAQ,EAAA,MAAAJ,EAAA,KAAA,SAAAQ,EAAA,IAAAD,GAAApB,MAAAU,EAAA,CAAA,MAAAU,EAAA,KAAA,SAAAA,EAAA,MAAAA,EAAA,IAAA,CAAA,CAAA,CAAA,EAMAG,EAAA,KAAAf,EAAA,CAAA,QAAA,IAAAI,EAAA,OAAA,EAAA,SAAA,CAEgD,OAAA,IACzCZ,EAAA,IAAAH,EAAA,CAAA,MAAA2B,EAAA,SAAAC,GAAAzB,MAAA0B,EAAA,CAAA,KAAAD,EAAA,OAAA,EAAA,SAAAA,EAAA,MAAA,CAAA,EAAA,CAGL,EAAA,CACF,EAAA,CACF,CAAA,CAAA,CAAA,CAAA,CAIR"}